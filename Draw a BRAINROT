-- STIDEV Simple Cheats v1.2
-- Исправленный WallHack с прохождением через стены

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- Переменные
local wallhack = false
local speed = 16
local originalParts = {}

-- Функция WallHack - проходит через стены, оставляет пол
local function toggleWallHack()
    wallhack = not wallhack
    
    if wallhack then
        -- Включаем WallHack
        originalParts = {}
        
        for _, part in pairs(workspace:GetDescendants()) do
            if part:IsA("BasePart") then
                -- Проверяем, является ли часть полом
                local isFloor = false
                
                -- Только явные полы по имени
                if part.Name:lower() == "baseplate" then
                    isFloor = true
                end
                
                if not isFloor then
                    -- Запоминаем оригинальные свойства
                    originalParts[part] = {
                        CanCollide = part.CanCollide,
                        Transparency = part.Transparency
                    }
                    
                    -- Делаем проходимым и немного прозрачным
                    part.CanCollide = false
                    part.Transparency = 0.5
                end
            end
        end
    else
        -- Выключаем WallHack
        for part, properties in pairs(originalParts) do
            if part and part.Parent then
                part.CanCollide = properties.CanCollide
                part.Transparency = properties.Transparency
            end
        end
        originalParts = {}
    end
end

-- Функция Speed
local function changeSpeed()
    speed = speed + 20
    if speed > 116 then speed = 16 end
    
    if player.Character then
        local humanoid = player.Character:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = speed
        end
    end
end

-- Создаем меню
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "STIDEV"
ScreenGui.Parent = game.CoreGui

-- Главная кнопка
local MainBtn = Instance.new("TextButton")
MainBtn.Size = UDim2.new(0, 50, 0, 50)
MainBtn.Position = UDim2.new(1, -60, 0, 10)
MainBtn.Text = "S"
MainBtn.BackgroundColor3 = Color3.fromRGB(100, 100, 255)
MainBtn.TextColor3 = Color3.new(1, 1, 1)
MainBtn.Font = Enum.Font.GothamBold
MainBtn.TextSize = 18
MainBtn.Parent = ScreenGui

-- Маленькое меню
local Menu = Instance.new("Frame")
Menu.Size = UDim2.new(0, 120, 0, 80)
Menu.Position = UDim2.new(1, -130, 0, 70)
Menu.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
Menu.Visible = false
Menu.Parent = ScreenGui

-- Кнопка WallHack
local WHBtn = Instance.new("TextButton")
WHBtn.Size = UDim2.new(0.9, 0, 0, 35)
WHBtn.Position = UDim2.new(0.05, 0, 0.1, 0)
WHBtn.Text = "WallHack: OFF"
WHBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 255)
WHBtn.TextColor3 = Color3.new(1, 1, 1)
WHBtn.Font = Enum.Font.Gotham
WHBtn.TextSize = 12
WHBtn.Parent = Menu

-- Кнопка Speed
local SpdBtn = Instance.new("TextButton")
SpdBtn.Size = UDim2.new(0.9, 0, 0, 35)
SpdBtn.Position = UDim2.new(0.05, 0, 0.55, 0)
SpdBtn.Text = "Speed: 16"
SpdBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 50)
SpdBtn.TextColor3 = Color3.new(1, 1, 1)
SpdBtn.Font = Enum.Font.Gotham
SpdBtn.TextSize = 12
SpdBtn.Parent = Menu

-- Обработчики
MainBtn.MouseButton1Click:Connect(function()
    Menu.Visible = not Menu.Visible
end)

WHBtn.MouseButton1Click:Connect(function()
    toggleWallHack()
    if wallhack then
        WHBtn.Text = "WallHack: ON"
        WHBtn.BackgroundColor3 = Color3.fromRGB(50, 255, 50)
    else
        WHBtn.Text = "WallHack: OFF"
        WHBtn.BackgroundColor3 = Color3.fromRGB(50, 150, 255)
    end
end)

SpdBtn.MouseButton1Click:Connect(function()
    changeSpeed()
    SpdBtn.Text = "Speed: " .. speed
    
    if speed > 50 then
        SpdBtn.BackgroundColor3 = Color3.fromRGB(50, 255, 100)
    elseif speed > 30 then
        SpdBtn.BackgroundColor3 = Color3.fromRGB(255, 150, 50)
    else
        SpdBtn.BackgroundColor3 = Color3.fromRGB(255, 100, 50)
    end
end)

-- Восстановление после респавна
player.CharacterAdded:Connect(function()
    wait(1)
    
    if speed > 16 then
        local humanoid = player.Character:FindFirstChild("Humanoid")
        if humanoid then
            humanoid.WalkSpeed = speed
        end
    end
    
    if wallhack then
        -- Восстанавливаем WallHack
        originalParts = {}
        
        for _, part in pairs(workspace:GetDescendants()) do
            if part:IsA("BasePart") then
                local isFloor = false
                
                if part.Name:lower() == "baseplate" then
                    isFloor = true
                end
                
                if not isFloor then
                    originalParts[part] = {
                        CanCollide = part.CanCollide,
                        Transparency = part.Transparency
                    }
                    
                    part.CanCollide = false
                    part.Transparency = 0.5
                end
            end
        end
    end
end)

print("STIDEV Simple Cheats v1.2 loaded!")
print("WallHack: проходит через стены, оставляет только Baseplate")
print("Speed: работает как обычно")
