-- STIDEV Enhanced Settings Menu v2.0
-- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∞–Ω–Ω–æ–µ –º–µ–Ω—é

local STIDEV = {
    Version = "2.0",
    Author = "STIDEV",
    Theme = "Midnight"
}

-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è
if not (executor and executor ~= "Unknown") then
    warn("[STIDEV] Executor –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω")
    return
end

-- –°–µ—Ä–≤–∏—Å—ã
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local RunService = game:GetService("RunService")
local LocalPlayer = Players.LocalPlayer
local Camera = workspace.CurrentCamera

-- –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–∏–∑–∞–π–Ω–∞
local DESIGN = {
    -- –¶–≤–µ—Ç–æ–≤–∞—è –ø–∞–ª–∏—Ç—Ä–∞
    Primary = Color3.fromRGB(25, 25, 35),      -- –û—Å–Ω–æ–≤–Ω–æ–π —Ñ–æ–Ω
    Secondary = Color3.fromRGB(40, 40, 55),    -- –í—Ç–æ—Ä–∏—á–Ω—ã–π —Ñ–æ–Ω
    Accent = Color3.fromRGB(0, 150, 255),      -- –ê–∫—Ü–µ–Ω—Ç–Ω—ã–π —Ü–≤–µ—Ç
    Success = Color3.fromRGB(0, 200, 100),     -- –£—Å–ø–µ—Ö
    Warning = Color3.fromRGB(255, 180, 0),     -- –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
    Danger = Color3.fromRGB(255, 60, 60),      -- –û–ø–∞—Å–Ω–æ—Å—Ç—å
    Text = Color3.fromRGB(240, 240, 240),      -- –¢–µ–∫—Å—Ç
    
    -- –¢–µ–Ω–∏ –∏ —Å–≤–µ—á–µ–Ω–∏—è
    GlowIntensity = 0.3,
    ShadowTransparency = 0.8,
    
    -- –ê–Ω–∏–º–∞—Ü–∏–∏
    TweenSpeed = 0.25,
    HoverEffect = 0.15,
    ClickEffect = 0.1,
    
    -- –†–∞–∑–º–µ—Ä—ã
    WindowWidth = 320,
    SectionHeight = 40,
    ButtonHeight = 36,
    ToggleSize = 24
}

-- –ê–Ω–∏–º–∞—Ü–∏–æ–Ω–Ω—ã–µ —É—Ç–∏–ª–∏—Ç—ã
local Animation = {
    Tweens = {},
    HoverStates = {}
}

function Animation:Tween(object, properties, duration, easing)
    local tweenInfo = TweenInfo.new(
        duration or DESIGN.TweenSpeed,
        easing or Enum.EasingStyle.Quint,
        Enum.EasingDirection.Out
    )
    
    local tween = TweenService:Create(object, tweenInfo, properties)
    tween:Play()
    
    table.insert(self.Tweens, tween)
    return tween
end

function Animation:ButtonHoverEffect(button)
    local originalColor = button.BackgroundColor3
    local originalSize = button.Size
    
    button.MouseEnter:Connect(function()
        self:Tween(button, {
            BackgroundColor3 = originalColor:Lerp(Color3.fromRGB(255, 255, 255), DESIGN.HoverEffect),
            Size = UDim2.new(originalSize.X.Scale, originalSize.X.Offset + 4, originalSize.Y.Scale, originalSize.Y.Offset)
        })
    end)
    
    button.MouseLeave:Connect(function()
        self:Tween(button, {
            BackgroundColor3 = originalColor,
            Size = originalSize
        })
    end)
    
    button.MouseButton1Down:Connect(function()
        self:Tween(button, {
            BackgroundColor3 = originalColor:Lerp(Color3.fromRGB(150, 150, 150), DESIGN.ClickEffect),
            Size = UDim2.new(originalSize.X.Scale, originalSize.X.Offset - 2, originalSize.Y.Scale, originalSize.Y.Offset - 2)
        }, 0.1)
    end)
    
    button.MouseButton1Up:Connect(function()
        self:Tween(button, {
            BackgroundColor3 = originalColor,
            Size = originalSize
        }, 0.15)
    end)
end

-- –°–æ–∑–¥–∞–Ω–∏–µ —É–ª—É—á—à–µ–Ω–Ω–æ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞
local function createEnhancedInterface()
    -- –û—Å–Ω–æ–≤–Ω–æ–π GUI
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "STIDEV_Settings"
    ScreenGui.ResetOnSpawn = false
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    
    -- –§–æ–Ω–æ–≤–æ–µ –∑–∞—Ç–µ–º–Ω–µ–Ω–∏–µ
    local BackgroundOverlay = Instance.new("Frame")
    BackgroundOverlay.Name = "BackgroundOverlay"
    BackgroundOverlay.Size = UDim2.new(1, 0, 1, 0)
    BackgroundOverlay.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    BackgroundOverlay.BackgroundTransparency = 0.7
    BackgroundOverlay.BorderSizePixel = 0
    BackgroundOverlay.ZIndex = 0
    BackgroundOverlay.Parent = ScreenGui
    
    -- –ì–ª–∞–≤–Ω–æ–µ –æ–∫–Ω–æ
    local MainWindow = Instance.new("Frame")
    MainWindow.Name = "MainWindow"
    MainWindow.Size = UDim2.new(0, DESIGN.WindowWidth, 0, 480)
    MainWindow.Position = UDim2.new(0.5, -DESIGN.WindowWidth/2, 0.5, -240)
    MainWindow.BackgroundColor3 = DESIGN.Primary
    MainWindow.BorderSizePixel = 0
    MainWindow.ZIndex = 1
    MainWindow.Parent = ScreenGui
    
    -- –°–∫—Ä—É–≥–ª–µ–Ω–∏–µ —É–≥–ª–æ–≤
    local windowCorner = Instance.new("UICorner")
    windowCorner.CornerRadius = UDim.new(0, 16)
    windowCorner.Parent = MainWindow
    
    -- –¢–µ–Ω—å/—Å–≤–µ—á–µ–Ω–∏–µ
    local windowGlow = Instance.new("UIStroke")
    windowGlow.Color = DESIGN.Accent
    windowGlow.Thickness = 2
    windowGlow.Transparency = DESIGN.GlowIntensity
    windowGlow.Parent = MainWindow
    
    -- –ì—Ä–∞–¥–∏–µ–Ω—Ç–Ω—ã–π —Ñ–æ–Ω –æ–∫–Ω–∞
    local windowGradient = Instance.new("UIGradient")
    windowGradient.Color = ColorSequence.new{
        ColorSequenceKeypoint.new(0, Color3.fromRGB(30, 30, 45)),
        ColorSequenceKeypoint.new(1, DESIGN.Primary)
    }
    windowGradient.Rotation = 120
    windowGradient.Parent = MainWindow
    
    -- –ó–∞–≥–æ–ª–æ–≤–æ–∫
    local TitleBar = Instance.new("Frame")
    TitleBar.Name = "TitleBar"
    TitleBar.Size = UDim2.new(1, -24, 0, 60)
    TitleBar.Position = UDim2.new(0, 12, 0, 12)
    TitleBar.BackgroundTransparency = 1
    TitleBar.Parent = MainWindow
    
    local Logo = Instance.new("TextLabel")
    Logo.Name = "Logo"
    Logo.Size = UDim2.new(0, 40, 0, 40)
    Logo.BackgroundTransparency = 1
    Logo.Text = "‚öôÔ∏è"
    Logo.TextSize = 28
    Logo.TextColor3 = DESIGN.Accent
    Logo.Parent = TitleBar
    
    local TitleContainer = Instance.new("Frame")
    TitleContainer.Size = UDim2.new(1, -50, 1, 0)
    TitleContainer.Position = UDim2.new(0, 45, 0, 0)
    TitleContainer.BackgroundTransparency = 1
    TitleContainer.Parent = TitleBar
    
    local TitleText = Instance.new("TextLabel")
    TitleText.Size = UDim2.new(1, 0, 0.6, 0)
    TitleText.BackgroundTransparency = 1
    TitleText.Text = "STIDEV SETTINGS"
    TitleText.TextColor3 = DESIGN.Text
    TitleText.TextSize = 20
    TitleText.Font = Enum.Font.GothamBlack
    TitleText.TextXAlignment = Enum.TextXAlignment.Left
    TitleText.Parent = TitleContainer
    
    local SubtitleText = Instance.new("TextLabel")
    SubtitleText.Size = UDim2.new(1, 0, 0.4, 0)
    SubtitleText.Position = UDim2.new(0, 0, 0.6, 0)
    SubtitleText.BackgroundTransparency = 1
    SubtitleText.Text = "Enhanced Control Panel"
    SubtitleText.TextColor3 = DESIGN.Text:Lerp(Color3.fromRGB(150, 150, 150), 0.5)
    SubtitleText.TextSize = 12
    SubtitleText.Font = Enum.Font.Gotham
    SubtitleText.TextXAlignment = Enum.TextXAlignment.Left
    SubtitleText.Parent = TitleContainer
    
    -- –ö–Ω–æ–ø–∫–∞ –∑–∞–∫—Ä—ã—Ç–∏—è
    local CloseButton = Instance.new("TextButton")
    CloseButton.Name = "CloseButton"
    CloseButton.Size = UDim2.new(0, 32, 0, 32)
    CloseButton.Position = UDim2.new(1, -32, 0, 0)
    CloseButton.BackgroundColor3 = DESIGN.Danger
    CloseButton.Text = "√ó"
    CloseButton.TextColor3 = Color3.fromRGB(255, 255, 255)
    CloseButton.TextSize = 20
    CloseButton.Font = Enum.Font.GothamBlack
    CloseButton.AutoButtonColor = false
    CloseButton.Parent = TitleBar
    
    local closeCorner = Instance.new("UICorner")
    closeCorner.CornerRadius = UDim.new(1, 0)
    closeCorner.Parent = CloseButton
    
    Animation:ButtonHoverEffect(CloseButton)
    
    -- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞—Å—Ç—Ä–æ–µ–∫
    local SettingsContainer = Instance.new("ScrollingFrame")
    SettingsContainer.Name = "SettingsContainer"
    SettingsContainer.Size = UDim2.new(1, -24, 1, -100)
    SettingsContainer.Position = UDim2.new(0, 12, 0, 80)
    SettingsContainer.BackgroundTransparency = 1
    SettingsContainer.BorderSizePixel = 0
    SettingsContainer.ScrollBarThickness = 6
    SettingsContainer.ScrollBarImageColor3 = DESIGN.Accent
    SettingsContainer.CanvasSize = UDim2.new(0, 0, 0, 600)
    SettingsContainer.Parent = MainWindow
    
    local layout = Instance.new("UIListLayout")
    layout.Padding = UDim.new(0, 12)
    layout.SortOrder = Enum.SortOrder.LayoutOrder
    layout.Parent = SettingsContainer
    
    -- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–µ–∫—Ü–∏–∏
    local function createSection(title, icon)
        local sectionFrame = Instance.new("Frame")
        sectionFrame.Name = title .. "Section"
        sectionFrame.Size = UDim2.new(1, 0, 0, DESIGN.SectionHeight + 100)
        sectionFrame.BackgroundColor3 = DESIGN.Secondary
        sectionFrame.BorderSizePixel = 0
        sectionFrame.LayoutOrder = 1
        
        local sectionCorner = Instance.new("UICorner")
        sectionCorner.CornerRadius = UDim.new(0, 12)
        sectionCorner.Parent = sectionFrame
        
        local sectionStroke = Instance.new("UIStroke")
        sectionStroke.Color = DESIGN.Accent:Lerp(Color3.fromRGB(255, 255, 255), 0.1)
        sectionStroke.Thickness = 1
        sectionStroke.Transparency = 0.7
        sectionStroke.Parent = sectionFrame
        
        -- –ó–∞–≥–æ–ª–æ–≤–æ–∫ —Å–µ–∫—Ü–∏–∏
        local sectionHeader = Instance.new("Frame")
        sectionHeader.Size = UDim2.new(1, -16, 0, DESIGN.SectionHeight)
        sectionHeader.Position = UDim2.new(0, 8, 0, 8)
        sectionHeader.BackgroundTransparency = 1
        sectionHeader.Parent = sectionFrame
        
        local sectionIcon = Instance.new("TextLabel")
        sectionIcon.Size = UDim2.new(0, 24, 0, 24)
        sectionIcon.BackgroundTransparency = 1
        sectionIcon.Text = icon or "‚Ä¢"
        sectionIcon.TextColor3 = DESIGN.Accent
        sectionIcon.TextSize = 16
        sectionIcon.Parent = sectionHeader
        
        local sectionTitle = Instance.new("TextLabel")
        sectionTitle.Size = UDim2.new(1, -30, 1, 0)
        sectionTitle.Position = UDim2.new(0, 30, 0, 0)
        sectionTitle.BackgroundTransparency = 1
        sectionTitle.Text = title
        sectionTitle.TextColor3 = DESIGN.Text
        sectionTitle.TextSize = 16
        sectionTitle.Font = Enum.Font.GothamBold
        sectionTitle.TextXAlignment = Enum.TextXAlignment.Left
        sectionTitle.Parent = sectionHeader
        
        -- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤
        local elementsContainer = Instance.new("Frame")
        elementsContainer.Name = "Elements"
        elementsContainer.Size = UDim2.new(1, -16, 1, -DESIGN.SectionHeight - 16)
        elementsContainer.Position = UDim2.new(0, 8, 0, DESIGN.SectionHeight + 8)
        elementsContainer.BackgroundTransparency = 1
        elementsContainer.Parent = sectionFrame
        
        local elementsLayout = Instance.new("UIListLayout")
        elementsLayout.Padding = UDim.new(0, 10)
        elementsLayout.SortOrder = Enum.SortOrder.LayoutOrder
        elementsLayout.Parent = elementsContainer
        
        return {
            Frame = sectionFrame,
            Container = elementsContainer
        }
    end
    
    -- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ–∫–ª—é—á–∞—Ç–µ–ª—è
    local function createToggle(label, defaultValue, callback)
        local toggleFrame = Instance.new("Frame")
        toggleFrame.Size = UDim2.new(1, 0, 0, 32)
        toggleFrame.BackgroundTransparency = 1
        toggleFrame.LayoutOrder = 2
        
        local toggleLabel = Instance.new("TextLabel")
        toggleLabel.Size = UDim2.new(0.7, 0, 1, 0)
        toggleLabel.BackgroundTransparency = 1
        toggleLabel.Text = label
        toggleLabel.TextColor3 = DESIGN.Text
        toggleLabel.TextSize = 14
        toggleLabel.Font = Enum.Font.Gotham
        toggleLabel.TextXAlignment = Enum.TextXAlignment.Left
        toggleLabel.Parent = toggleFrame
        
        local toggleButton = Instance.new("TextButton")
        toggleButton.Name = "Toggle"
        toggleButton.Size = UDim2.new(0, 50, 0, 26)
        toggleButton.Position = UDim2.new(1, -50, 0.5, -13)
        toggleButton.BackgroundColor3 = defaultValue and DESIGN.Success or DESIGN.Secondary
        toggleButton.Text = ""
        toggleButton.AutoButtonColor = false
        toggleButton.Parent = toggleFrame
        
        local toggleCorner = Instance.new("UICorner")
        toggleCorner.CornerRadius = UDim.new(1, 0)
        toggleCorner.Parent = toggleButton
        
        local toggleCircle = Instance.new("Frame")
        toggleCircle.Name = "Circle"
        toggleCircle.Size = UDim2.new(0, 20, 0, 20)
        toggleCircle.Position = defaultValue and UDim2.new(1, -23, 0.5, -10) or UDim2.new(0, 3, 0.5, -10)
        toggleCircle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        toggleCircle.BorderSizePixel = 0
        toggleCircle.Parent = toggleButton
        
        local circleCorner = Instance.new("UICorner")
        circleCorner.CornerRadius = UDim.new(1, 0)
        circleCorner.Parent = toggleCircle
        
        local state = defaultValue
        
        local function updateToggle()
            if state then
                Animation:Tween(toggleButton, {BackgroundColor3 = DESIGN.Success})
                Animation:Tween(toggleCircle, {Position = UDim2.new(1, -23, 0.5, -10)})
            else
                Animation:Tween(toggleButton, {BackgroundColor3 = DESIGN.Secondary})
                Animation:Tween(toggleCircle, {Position = UDim2.new(0, 3, 0.5, -10)})
            end
        end
        
        toggleButton.MouseButton1Click:Connect(function()
            state = not state
            updateToggle()
            if callback then
                callback(state)
            end
        end)
        
        Animation:ButtonHoverEffect(toggleButton)
        
        return toggleFrame
    end
    
    -- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è —Å–ª–∞–π–¥–µ—Ä–∞
    local function createSlider(label, minValue, maxValue, defaultValue, callback)
        local sliderFrame = Instance.new("Frame")
        sliderFrame.Size = UDim2.new(1, 0, 0, 60)
        sliderFrame.BackgroundTransparency = 1
        sliderFrame.LayoutOrder = 3
        
        local sliderLabel = Instance.new("TextLabel")
        sliderLabel.Size = UDim2.new(1, 0, 0, 20)
        sliderLabel.BackgroundTransparency = 1
        sliderLabel.Text = label .. ": " .. defaultValue
        sliderLabel.TextColor3 = DESIGN.Text
        sliderLabel.TextSize = 14
        sliderLabel.Font = Enum.Font.Gotham
        sliderLabel.TextXAlignment = Enum.TextXAlignment.Left
        sliderLabel.Parent = sliderFrame
        
        local sliderTrack = Instance.new("Frame")
        sliderTrack.Name = "Track"
        sliderTrack.Size = UDim2.new(1, 0, 0, 6)
        sliderTrack.Position = UDim2.new(0, 0, 0, 30)
        sliderTrack.BackgroundColor3 = DESIGN.Secondary
        sliderTrack.BorderSizePixel = 0
        sliderTrack.Parent = sliderFrame
        
        local trackCorner = Instance.new("UICorner")
        trackCorner.CornerRadius = UDim.new(1, 0)
        trackCorner.Parent = sliderTrack
        
        local sliderFill = Instance.new("Frame")
        sliderFill.Name = "Fill"
        sliderFill.Size = UDim2.new((defaultValue - minValue) / (maxValue - minValue), 0, 1, 0)
        sliderFill.BackgroundColor3 = DESIGN.Accent
        sliderFill.BorderSizePixel = 0
        sliderFill.Parent = sliderTrack
        
        local fillCorner = Instance.new("UICorner")
        fillCorner.CornerRadius = UDim.new(1, 0)
        fillCorner.Parent = sliderFill
        
        local sliderHandle = Instance.new("TextButton")
        sliderHandle.Name = "Handle"
        sliderHandle.Size = UDim2.new(0, 16, 0, 16)
        sliderHandle.Position = UDim2.new((defaultValue - minValue) / (maxValue - minValue), -8, 0.5, -8)
        sliderHandle.BackgroundColor3 = Color3.fromRGB(255, 255, 255)
        sliderHandle.Text = ""
        sliderHandle.AutoButtonColor = false
        sliderHandle.Parent = sliderTrack
        
        local handleCorner = Instance.new("UICorner")
        handleCorner.CornerRadius = UDim.new(1, 0)
        handleCorner.Parent = sliderHandle
        
        local handleGlow = Instance.new("UIStroke")
        handleGlow.Color = DESIGN.Accent
        handleGlow.Thickness = 2
        handleGlow.Parent = sliderHandle
        
        local dragging = false
        local currentValue = defaultValue
        
        local function updateSlider(value)
            local normalized = math.clamp((value - minValue) / (maxValue - minValue), 0, 1)
            currentValue = minValue + (maxValue - minValue) * normalized
            
            Animation:Tween(sliderFill, {Size = UDim2.new(normalized, 0, 1, 0)})
            Animation:Tween(sliderHandle, {Position = UDim2.new(normalized, -8, 0.5, -8)})
            
            sliderLabel.Text = label .. ": " .. string.format("%.1f", currentValue)
            
            if callback then
                callback(currentValue)
            end
        end
        
        sliderHandle.MouseButton1Down:Connect(function()
            dragging = true
        end)
        
        UserInputService.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                dragging = false
            end
        end)
        
        UserInputService.InputChanged:Connect(function(input)
            if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
                local mousePos = UserInputService:GetMouseLocation()
                local trackAbs = sliderTrack.AbsolutePosition
                local trackSize = sliderTrack.AbsoluteSize
                
                local relativeX = (mousePos.X - trackAbs.X) / trackSize.X
                relativeX = math.clamp(relativeX, 0, 1)
                
                updateSlider(minValue + (maxValue - minValue) * relativeX)
            end
        end)
        
        sliderTrack.MouseButton1Down:Connect(function(input)
            local mousePos = UserInputService:GetMouseLocation()
            local trackAbs = sliderTrack.AbsolutePosition
            local trackSize = sliderTrack.AbsoluteSize
            
            local relativeX = (mousePos.X - trackAbs.X) / trackSize.X
            relativeX = math.clamp(relativeX, 0, 1)
            
            updateSlider(minValue + (maxValue - minValue) * relativeX)
            dragging = true
        end)
        
        return sliderFrame
    end
    
    -- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–Ω–æ–ø–∫–∏
    local function createButton(label, color, callback)
        local button = Instance.new("TextButton")
        button.Size = UDim2.new(1, 0, 0, DESIGN.ButtonHeight)
        button.BackgroundColor3 = color or DESIGN.Accent
        button.Text = label
        button.TextColor3 = Color3.fromRGB(255, 255, 255)
        button.TextSize = 14
        button.Font = Enum.Font.GothamBold
        button.AutoButtonColor = false
        button.LayoutOrder = 4
        
        local buttonCorner = Instance.new("UICorner")
        buttonCorner.CornerRadius = UDim.new(0, 10)
        buttonCorner.Parent = button
        
        local buttonGlow = Instance.new("UIStroke")
        buttonGlow.Color = color:Lerp(Color3.fromRGB(255, 255, 255), 0.3)
        buttonGlow.Thickness = 1
        buttonGlow.Parent = button
        
        button.MouseButton1Click:Connect(function()
            if callback then
                callback()
            end
        end)
        
        Animation:ButtonHoverEffect(button)
        
        return button
    end
    
    -- –§—É–Ω–∫—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –≤—ã–ø–∞–¥–∞—é—â–µ–≥–æ —Å–ø–∏—Å–∫–∞
    local function createDropdown(label, options, defaultIndex, callback)
        local dropdownFrame = Instance.new("Frame")
        dropdownFrame.Size = UDim2.new(1, 0, 0, 40)
        dropdownFrame.BackgroundTransparency = 1
        dropdownFrame.LayoutOrder = 5
        
        local dropdownLabel = Instance.new("TextLabel")
        dropdownLabel.Size = UDim2.new(0.5, 0, 1, 0)
        dropdownLabel.BackgroundTransparency = 1
        dropdownLabel.Text = label
        dropdownLabel.TextColor3 = DESIGN.Text
        dropdownLabel.TextSize = 14
        dropdownLabel.Font = Enum.Font.Gotham
        dropdownLabel.TextXAlignment = Enum.TextXAlignment.Left
        dropdownLabel.Parent = dropdownFrame
        
        local dropdownButton = Instance.new("TextButton")
        dropdownButton.Name = "Dropdown"
        dropdownButton.Size = UDim2.new(0.5, 0, 1, 0)
        dropdownButton.Position = UDim2.new(0.5, 0, 0, 0)
        dropdownButton.BackgroundColor3 = DESIGN.Secondary
        dropdownButton.Text = options[defaultIndex] or "Select..."
        dropdownButton.TextColor3 = DESIGN.Text
        dropdownButton.TextSize = 13
        dropdownButton.Font = Enum.Font.Gotham
        dropdownButton.AutoButtonColor = false
        dropdownButton.Parent = dropdownFrame
        
        local dropdownCorner = Instance.new("UICorner")
        dropdownCorner.CornerRadius = UDim.new(0, 8)
        dropdownCorner.Parent = dropdownButton
        
        local dropdownIcon = Instance.new("TextLabel")
        dropdownIcon.Size = UDim2.new(0, 20, 0, 20)
        dropdownIcon.Position = UDim2.new(1, -25, 0.5, -10)
        dropdownIcon.BackgroundTransparency = 1
        dropdownIcon.Text = "‚ñº"
        dropdownIcon.TextColor3 = DESIGN.Text
        dropdownIcon.TextSize = 12
        dropdownIcon.Font = Enum.Font.Gotham
        dropdownIcon.Parent = dropdownButton
        
        local currentSelection = defaultIndex
        local dropdownOpen = false
        
        -- –í—ã–ø–∞–¥–∞—é—â–µ–µ –º–µ–Ω—é
        local dropdownMenu = Instance.new("Frame")
        dropdownMenu.Name = "DropdownMenu"
        dropdownMenu.Size = UDim2.new(0.5, 0, 0, #options * 30)
        dropdownMenu.Position = UDim2.new(0.5, 0, 1, 5)
        dropdownMenu.BackgroundColor3 = DESIGN.Secondary
        dropdownMenu.BorderSizePixel = 0
        dropdownMenu.Visible = false
        dropdownMenu.ZIndex = 10
        dropdownMenu.Parent = dropdownFrame
        
        local menuCorner = Instance.new("UICorner")
        menuCorner.CornerRadius = UDim.new(0, 8)
        menuCorner.Parent = dropdownMenu
        
        local menuLayout = Instance.new("UIListLayout")
        menuLayout.Parent = dropdownMenu
        
        -- –°–æ–∑–¥–∞–Ω–∏–µ –æ–ø—Ü–∏–π
        for i, option in ipairs(options) do
            local optionButton = Instance.new("TextButton")
            optionButton.Size = UDim2.new(1, 0, 0, 30)
            optionButton.BackgroundColor3 = DESIGN.Secondary
            optionButton.Text = option
            optionButton.TextColor3 = DESIGN.Text
            optionButton.TextSize = 13
            optionButton.Font = Enum.Font.Gotham
            optionButton.AutoButtonColor = false
            optionButton.LayoutOrder = i
            optionButton.Parent = dropdownMenu
            
            local optionCorner = Instance.new("UICorner")
            optionCorner.CornerRadius = UDim.new(0, 6)
            optionCorner.Parent = optionButton
            
            optionButton.MouseButton1Click:Connect(function()
                currentSelection = i
                dropdownButton.Text = option
                dropdownOpen = false
                dropdownMenu.Visible = false
                
                Animation:Tween(dropdownIcon, {Rotation = 0})
                
                if callback then
                    callback(option, i)
                end
            end)
            
            Animation:ButtonHoverEffect(optionButton)
        end
        
        dropdownButton.MouseButton1Click:Connect(function()
            dropdownOpen = not dropdownOpen
            dropdownMenu.Visible = dropdownOpen
            
            if dropdownOpen then
                Animation:Tween(dropdownIcon, {Rotation = 180})
                Animation:Tween(dropdownMenu, {Size = UDim2.new(0.5, 0, 0, #options * 30)})
            else
                Animation:Tween(dropdownIcon, {Rotation = 0})
            end
        end)
        
        Animation:ButtonHoverEffect(dropdownButton)
        
        return dropdownFrame
    end
    
    -- –°–æ–∑–¥–∞–Ω–∏–µ —Å–µ–∫—Ü–∏–π –∏ —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (—Å–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞)
    
    -- –ì—Ä–∞—Ñ–∏–∫–∞
    local graphicsSection = createSection("–ì—Ä–∞—Ñ–∏–∫–∞", "üñ•Ô∏è")
    graphicsSection.Frame.Parent = SettingsContainer
    
    local graphicsContainer = graphicsSection.Container
    
    -- –ü—Ä–∏–º–µ—Ä —ç–ª–µ–º–µ–Ω—Ç–æ–≤ (–º–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ)
    local shadowToggle = createToggle("–¢–µ–Ω–∏", true, function(state)
        print("–¢–µ–Ω–∏:", state)
    end)
    shadowToggle.Parent = graphicsContainer
    
    local textureSlider = createSlider("–ö–∞—á–µ—Å—Ç–≤–æ —Ç–µ–∫—Å—Ç—É—Ä", 1, 10, 7, function(value)
        print("–ö–∞—á–µ—Å—Ç–≤–æ —Ç–µ–∫—Å—Ç—É—Ä:", value)
    end)
    textureSlider.Parent = graphicsContainer
    
    -- –ì–µ–π–º–ø–ª–µ–π
    local gameplaySection = createSection("–ì–µ–π–º–ø–ª–µ–π", "üéÆ")
    gameplaySection.Frame.Parent = SettingsContainer
    
    local gameplayContainer = gameplaySection.Container
    
    local sensitivitySlider = createSlider("–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å", 0.1, 5, 2.5, function(value)
        print("–ß—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:", value)
    end)
    sensitivitySlider.Parent = gameplayContainer
    
    local difficultyDropdown = createDropdown("–°–ª–æ–∂–Ω–æ—Å—Ç—å", {"–õ–µ–≥–∫–æ", "–°—Ä–µ–¥–Ω–µ", "–°–ª–æ–∂–Ω–æ"}, 2, function(option, index)
        print("–°–ª–æ–∂–Ω–æ—Å—Ç—å:", option)
    end)
    difficultyDropdown.Parent = gameplayContainer
    
    -- –ê—É–¥–∏–æ
    local audioSection = createSection("–ê—É–¥–∏–æ", "üîä")
    audioSection.Frame.Parent = SettingsContainer
    
    local audioContainer = audioSection.Container
    
    local volumeSlider = createSlider("–ì—Ä–æ–º–∫–æ—Å—Ç—å", 0, 100, 80, function(value)
        print("–ì—Ä–æ–º–∫–æ—Å—Ç—å:", value)
    end)
    volumeSlider.Parent = audioContainer
    
    local musicToggle = createToggle("–§–æ–Ω–æ–≤–∞—è –º—É–∑—ã–∫–∞", true, function(state)
        print("–ú—É–∑—ã–∫–∞:", state)
    end)
    musicToggle.Parent = audioContainer
    
    -- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
    local controlsSection = createSection("–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ", "üéØ")
    controlsSection.Frame.Parent = SettingsContainer
    
    local controlsContainer = controlsSection.Container
    
    local invertToggle = createToggle("–ò–Ω–≤–µ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –æ—Å—å Y", false, function(state)
        print("–ò–Ω–≤–µ—Ä—Å–∏—è Y:", state)
    end)
    invertToggle.Parent = controlsContainer
    
    local resetButton = createButton("–°–±—Ä–æ—Å–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏", DESIGN.Danger, function()
        print("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–±—Ä–æ—à–µ–Ω—ã")
    end)
    resetButton.Parent = controlsContainer
    
    local saveButton = createButton("–°–æ—Ö—Ä–∞–Ω–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏", DESIGN.Success, function()
        print("–ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã")
    end)
    saveButton.Parent = controlsContainer
    
    -- –ê–Ω–∏–º–∞—Ü–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è
    MainWindow.Size = UDim2.new(0, 0, 0, 0)
    MainWindow.Position = UDim2.new(0.5, 0, 0.5, 0)
    MainWindow.BackgroundTransparency = 1
    
    task.wait(0.1)
    
    Animation:Tween(MainWindow, {
        Size = UDim2.new(0, DESIGN.WindowWidth, 0, 480),
        Position = UDim2.new(0.5, -DESIGN.WindowWidth/2, 0.5, -240),
        BackgroundTransparency = 0
    }, 0.4)
    
    -- –§—É–Ω–∫—Ü–∏—è –∑–∞–∫—Ä—ã—Ç–∏—è
    CloseButton.MouseButton1Click:Connect(function()
        Animation:Tween(MainWindow, {
            Size = UDim2.new(0, 0, 0, 0),
            Position = UDim2.new(0.5, 0, 0.5, 0),
            BackgroundTransparency = 1
        }, 0.3)
        
        Animation:Tween(BackgroundOverlay, {
            BackgroundTransparency = 1
        }, 0.3)
        
        task.wait(0.3)
        ScreenGui:Destroy()
    end)
    
    -- –ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –æ–∫–Ω–∞
    local draggingWindow = false
    local dragStart, startPos
    
    TitleBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 then
            draggingWindow = true
            dragStart = input.Position
            startPos = MainWindow.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    draggingWindow = false
                end
            end)
        end
    end)
    
    UserInputService.InputChanged:Connect(function(input)
        if draggingWindow and input.UserInputType == Enum.UserInputType.MouseMovement then
            local delta = input.Position - dragStart
            MainWindow.Position = UDim2.new(
                startPos.X.Scale,
                startPos.X.Offset + delta.X,
                startPos.Y.Scale,
                startPos.Y.Offset + delta.Y
            )
        end
    end)
    
    BackgroundOverlay.MouseButton1Click:Connect(function()
        CloseButton.MouseButton1Click:Fire()
    end)
    
    ScreenGui.Parent = Camera
    
    return ScreenGui
end

-- –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
createEnhancedInterface()

print("[STIDEV] Enhanced Settings Menu v" .. STIDEV.Version .. " loaded successfully!")
print("[STIDEV] Theme: " .. STIDEV.Theme)
