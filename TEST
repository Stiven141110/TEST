-- No Limit Orb Farm | STIDEV - Enhanced Beautiful UI v2.0 (2025)

local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local UserInputService = game:GetService("UserInputService")
local StarterGui = game:GetService("StarterGui")

local LocalPlayer = Players.LocalPlayer

local Stage = 1
local MaxStage = 30
local Running = false

-- Дизайн
local DESIGN = {
    Primary = Color3.fromRGB(20, 20, 30),
    Secondary = Color3.fromRGB(30, 30, 45),
    Accent = Color3.fromRGB(0, 170, 255),
    Success = Color3.fromRGB(0, 200, 100),
    Danger = Color3.fromRGB(255, 60, 60),
    Text = Color3.fromRGB(240, 240, 240),
    HoverLighten = 0.15
}

-- Анимации
local function Tween(obj, props, duration = 0.3)
    TweenService:Create(obj, TweenInfo.new(duration, Enum.EasingStyle.Quint, Enum.EasingDirection.Out), props):Play()
end

local function AddHoverEffect(button, baseColor)
    button.MouseEnter:Connect(function()
        Tween(button, {BackgroundColor3 = baseColor:Lerp(Color3.new(1,1,1), DESIGN.HoverLighten)})
    end)
    button.MouseLeave:Connect(function()
        Tween(button, {BackgroundColor3 = baseColor})
    end)
end

-- Создание GUI
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "STIDEV_OrbFarm"
ScreenGui.ResetOnSpawn = false
ScreenGui.IgnoreGuiInset = true

local MainFrame = Instance.new("Frame")
MainFrame.Size = UDim2.new(0, 260, 0, 180)
MainFrame.Position = UDim2.new(0.5, -130, 0.5, -90)
MainFrame.BackgroundColor3 = DESIGN.Primary
MainFrame.Parent = ScreenGui

local MainCorner = Instance.new("UICorner")
MainCorner.CornerRadius = UDim.new(0, 16)
MainCorner.Parent = MainFrame

local MainStroke = Instance.new("UIStroke")
MainStroke.Color = DESIGN.Accent
MainStroke.Thickness = 2
MainStroke.Transparency = 0.4
MainStroke.Parent = MainFrame

local MainGradient = Instance.new("UIGradient")
MainGradient.Color = ColorSequence.new{DESIGN.Primary, Color3.fromRGB(35, 35, 50)}
MainGradient.Rotation = 90
MainGradient.Parent = MainFrame

-- Заголовок
local TitleBar = Instance.new("Frame")
TitleBar.Size = UDim2.new(1, 0, 0, 50)
TitleBar.BackgroundColor3 = DESIGN.Secondary
TitleBar.Parent = MainFrame

local TitleCorner = Instance.new("UICorner")
TitleCorner.CornerRadius = UDim.new(0, 16)
TitleCorner.Parent = TitleBar

local TitleLabel = Instance.new("TextLabel")
TitleLabel.Size = UDim2.new(1, -60, 1, 0)
TitleLabel.Position = UDim2.new(0, 15, 0, 0)
TitleLabel.BackgroundTransparency = 1
TitleLabel.Text = "⚡ No Limit Orb Farm"
TitleLabel.TextColor3 = DESIGN.Accent
TitleLabel.TextSize = 18
TitleLabel.Font = Enum.Font.GothamBold
TitleLabel.TextXAlignment = Enum.TextXAlignment.Left
TitleLabel.Parent = TitleBar

local Subtitle = Instance.new("TextLabel")
Subtitle.Size = UDim2.new(1, -60, 0.5, 0)
Subtitle.Position = UDim2.new(0, 18, 0.5, 0)
Subtitle.BackgroundTransparency = 1
Subtitle.Text = "by STIDEV"
Subtitle.TextColor3 = Color3.fromRGB(180, 180, 180)
Subtitle.TextSize = 12
Subtitle.Font = Enum.Font.Gotham
Subtitle.TextXAlignment = Enum.TextXAlignment.Left
Subtitle.Parent = TitleBar

local CloseButton = Instance.new("TextButton")
CloseButton.Size = UDim2.new(0, 36, 0, 36)
CloseButton.Position = UDim2.new(1, -44, 0, 7)
CloseButton.BackgroundColor3 = DESIGN.Danger
CloseButton.Text = "×"
CloseButton.TextColor3 = Color3.new(1,1,1)
CloseButton.TextSize = 24
CloseButton.Font = Enum.Font.GothamBold
CloseButton.Parent = TitleBar

local CloseCorner = Instance.new("UICorner")
CloseCorner.CornerRadius = UDim.new(1, 0)
CloseCorner.Parent = CloseButton
AddHoverEffect(CloseButton, DESIGN.Danger)

-- Контент
local StageLabel = Instance.new("TextLabel")
StageLabel.Size = UDim2.new(0.4, 0, 0, 30)
StageLabel.Position = UDim2.new(0, 20, 0, 60)
StageLabel.BackgroundTransparency = 1
StageLabel.Text = "Stage:"
StageLabel.TextColor3 = DESIGN.Text
StageLabel.TextSize = 16
StageLabel.Font = Enum.Font.GothamBold
StageLabel.TextXAlignment = Enum.TextXAlignment.Left
StageLabel.Parent = MainFrame

local StageBox = Instance.new("TextBox")
StageBox.Size = UDim2.new(0, 80, 0, 34)
StageBox.Position = UDim2.new(0.5, -40, 0, 58)
StageBox.BackgroundColor3 = DESIGN.Secondary
StageBox.TextColor3 = DESIGN.Text
StageBox.PlaceholderText = "1"
StageBox.Text = "1"
StageBox.TextSize = 16
StageBox.Font = Enum.Font.Gotham
StageBox.Parent = MainFrame

local BoxCorner = Instance.new("UICorner")
BoxCorner.CornerRadius = UDim.new(0, 8)
BoxCorner.Parent = StageBox

local LeftButton = Instance.new("TextButton")
LeftButton.Size = UDim2.new(0, 34, 0, 34)
LeftButton.Position = UDim2.new(0.35, 0, 0, 58)
LeftButton.BackgroundColor3 = DESIGN.Secondary
LeftButton.Text = "<"
LeftButton.TextColor3 = DESIGN.Text
LeftButton.TextSize = 18
LeftButton.Parent = MainFrame
AddHoverEffect(LeftButton, DESIGN.Secondary)

local RightButton = Instance.new("TextButton")
RightButton.Size = UDim2.new(0, 34, 0, 34)
RightButton.Position = UDim2.new(0.65, 0, 0, 58)
RightButton.BackgroundColor3 = DESIGN.Secondary
RightButton.Text = ">"
RightButton.TextColor3 = DESIGN.Text
RightButton.TextSize = 18
RightButton.Parent = MainFrame
AddHoverEffect(RightButton, DESIGN.Secondary)

local ToggleButton = Instance.new("TextButton")
ToggleButton.Size = UDim2.new(0, 220, 0, 40)
ToggleButton.Position = UDim2.new(0.5, -110, 1, -60)
ToggleButton.BackgroundColor3 = DESIGN.Success
ToggleButton.Text = "Start Farm"
ToggleButton.TextColor3 = Color3.new(1,1,1)
ToggleButton.TextSize = 18
ToggleButton.Font = Enum.Font.GothamBold
ToggleButton.Parent = MainFrame

local ToggleCorner = Instance.new("UICorner")
ToggleCorner.CornerRadius = UDim.new(0, 12)
ToggleCorner.Parent = ToggleButton
AddHoverEffect(ToggleButton, DESIGN.Success)

-- Анимация появления
MainFrame.BackgroundTransparency = 1
MainFrame.Size = UDim2.new(0, 0, 0, 0)
Tween(MainFrame, {BackgroundTransparency = 0, Size = UDim2.new(0, 260, 0, 180)}, 0.4)

-- Перетаскивание
local dragging = false
local dragInput, dragStart, startPos

TitleBar.InputBegan:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = true
        dragStart = input.Position
        startPos = MainFrame.Position
    end
end)

UserInputService.InputChanged:Connect(function(input)
    if dragging and input.UserInputType == Enum.UserInputType.MouseMovement then
        local delta = input.Position - dragStart
        MainFrame.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

UserInputService.InputEnded:Connect(function(input)
    if input.UserInputType == Enum.UserInputType.MouseButton1 then
        dragging = false
    end
end)

-- Логика кнопок
StageBox.FocusLost:Connect(function(enterPressed)
    if enterPressed then
        local val = tonumber(StageBox.Text)
        if val and val >= 1 and val <= MaxStage then
            Stage = val
        else
            StageBox.Text = tostring(Stage)
        end
    end
end)

LeftButton.MouseButton1Click:Connect(function()
    if Stage > 1 then Stage -= 1 StageBox.Text = tostring(Stage) end
end)

RightButton.MouseButton1Click:Connect(function()
    if Stage < MaxStage then Stage += 1 StageBox.Text = tostring(Stage) end
end)

local function GetHumanoidRootPart()
    local char = LocalPlayer.Character or LocalPlayer.CharacterAdded:Wait()
    return char:WaitForChild("HumanoidRootPart")
end

local function Teleport(cf)
    local root = GetHumanoidRootPart()
    if root then root.CFrame = cf end
end

local function CollectOrbs()
    local boosts = workspace:FindFirstChild("Map") and workspace.Map:FindFirstChild("Stages") and workspace.Map.Stages:FindFirstChild("Boosts")
    if not boosts then return end
    local stageFolder = boosts:FindFirstChild(tostring(Stage))
    if not stageFolder then return end

    for _, model in ipairs(stageFolder:GetChildren()) do
        if not Running then break end
        for _, orb in ipairs(model:GetDescendants()) do
            if not Running then break end
            if orb:IsA("BasePart") then
                Teleport(orb.CFrame)
                task.wait(0.25)
            end
        end
    end
end

ToggleButton.MouseButton1Click:Connect(function()
    Running = not Running
    if Running then
        ToggleButton.Text = "Stop Farm"
        ToggleButton.BackgroundColor3 = DESIGN.Danger
        AddHoverEffect(ToggleButton, DESIGN.Danger)
        task.spawn(function()
            while Running do
                CollectOrbs()
                task.wait()
            end
        end)
    else
        ToggleButton.Text = "Start Farm"
        ToggleButton.BackgroundColor3 = DESIGN.Success
        AddHoverEffect(ToggleButton, DESIGN.Success)
    end
end)

CloseButton.MouseButton1Click:Connect(function()
    Tween(MainFrame, {BackgroundTransparency = 1, Size = UDim2.new(0,0,0,0)}, 0.3)
    task.wait(0.3)
    ScreenGui:Destroy()
end)

-- Запуск в PlayerGui (работает в 2025)
ScreenGui.Parent = LocalPlayer:WaitForChild("PlayerGui")

-- Уведомление
StarterGui:SetCore("SendNotification", {
    Title = "STIDEV Orb Farm",
    Text = "Teleport to your world, then set stage and start!",
    Duration = 8
})

print("[STIDEV] Beautiful Orb Farm UI loaded!")
